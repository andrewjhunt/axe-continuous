<!DOCTYPE html>
<html>

<head>
	<title>axe-continuous demo</title>

	<script src="https://cdn.jsdelivr.net/npm/axe-core@4.9.1/axe.min.js"></script>
	<!-- <script src="https://cdn.jsdelivr.net/gh/andrewjhunt/axe-continuous@main/axe-continuous.js"></script> -->
	<script src="./axe-continuous.js"></script>

	<style>
		* {
			font-family: Helvetica, sans-serif;
			color: black;
		}
		body {
			background: #f0f0f0;
			margin: 0px;
			padding: 20px;
		}
		.container {
			margin-top: 20px;
			display: flex;
			flex-wrap: wrap;
		}
		.sample-box {
			display: none;
			width: 20%;
			margin: 10px 1%;
			padding: 6px;
			border: solid 1px black;
		}
	</style>
</head>

<body class="axe-scan-here">
	
	<h1>axe-continuous demo</h1>
	<p>Open the browser console to view accessiblity issue reports.</p>

	<div>
		<button onclick="reveal(false)">Reveal</button>
		<button onclick="reveal(true)">Reveal all</button>
		<button onclick="restart()">Restart</button>
	</div>

	<div class="container">

		<div class="sample-box">
			<h4>Font sizes</h4>
			<hr/>

			<h1>H1 header 1</h1>
			<h2>H2 header 2</h2>
			<h3>H3 header 3</h3>
			<h4>H4 header 4</h4>
			<h5>H5 header 5</h5>
			<h6>H6 header 6</h6>

			<p >body size</p>
			<p style="font-size:smaller">smaller</p>
			<p style="font-size:small">small</p>
			<p style="font-size:x-small">x-small</p>
			<p style="font-size:xx-small">xx-small</p>
		</div>

		<div class="sample-box">
			<h4>Contrast</h4>
			<hr/>
			<p style="color: rgba(0,0,0, 1.0)">Black</p>
			<p style="color: rgba(0,0,0, 0.9)">10% transparency</p>
			<p style="color: rgba(0,0,0, 0.8)">20% transparency</p>
			<p style="color: rgba(0,0,0, 0.7)">30% transparency</p>
			<p style="color: rgba(0,0,0, 0.6)">40% transparency</p>
			<p style="color: rgba(0,0,0, 0.5)">50% transparency</p>
			<p style="color: rgba(0,0,0, 0.4)">60% transparency</p>
			<p style="color: rgba(0,0,0, 0.3)">70% transparency</p>
			<p style="color: rgba(0,0,0, 0.3)">80% transparency</p>
			<p style="color: rgba(0,0,0, 0.2)">90% transparency</p>
			<p style="color: rgba(0,0,0, 0.0)">100% transparency</p>
		</div>

		<div class="sample-box">
			<h4>Bad forms</h4>
			<hr/>
			<form>
				No label:
				<input placeholder="hard to read?"></input>
				<br/>
				<input type="checkbox"></input>
			</form>
		</div>

		<div class="sample-box">
			<h4>Bad image labelling</h4>
			<hr/>

			<img>
				<svg height="50px" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
					<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
					<path
							d="M6.50003 5.50003L7.50003 6.50003L8.50003 5.50003C9.05231 4.94774 9.94774 4.94774 
							10.5 5.50003C11.0523 6.05231 11.0523 6.94774 
							10.5 7.50003L7.50003 10.5L4.50003 7.50003C3.94774 6.94774 3.94774 6.05231 
							4.50003 5.50003C5.05231 4.94774 5.94774 4.94774 6.50003 5.50003Z"
							stroke="#000000" />
				</svg>
			</img>

			<p>Uploaded to: SVG Repo</p>
			<hr/>

			<img>
				<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
				 	width="90%" viewBox="0 0 1252.000000 1280.000000"
					preserveAspectRatio="xMidYMid meet">
						<!--
						<metadata>
						Created by potrace 1.15, written by Peter Selinger 2001-2017
						</metadata>
						-->
						<g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)"
						fill="#000000" stroke="none">
						<path d="M10215 12765 c-25 -110 -88 -276 -166 -435 -144 -294 -178 -417 -165
						-592 l7 -88 -49 0 c-59 0 -136 -22 -164 -47 -12 -11 -22 -14 -25 -7 -12 33
						-148 268 -221 379 -107 164 -194 276 -302 389 -86 89 -200 185 -200 168 0 -5
						7 -29 16 -53 30 -85 53 -238 69 -455 18 -258 35 -372 71 -486 43 -136 105
						-242 204 -351 l50 -55 -21 -54 c-102 -255 -170 -550 -198 -864 l-9 -101 -110
						-148 c-209 -282 -392 -605 -522 -920 -151 -367 -221 -466 -580 -825 -342 -342
						-384 -396 -600 -770 -215 -371 -252 -426 -680 -995 -333 -443 -455 -613 -561
						-785 -184 -295 -332 -639 -393 -912 -89 -398 -74 -1081 34 -1533 16 -66 65
						-248 110 -405 136 -476 172 -648 172 -830 -1 -256 -126 -433 -412 -579 -247
						-127 -592 -213 -1165 -291 -834 -113 -1825 -166 -3735 -200 -322 -6 -597 -13
						-612 -16 -32 -6 -58 -38 -58 -70 0 -33 44 -79 92 -99 61 -24 386 -63 878 -105
						1339 -113 3183 -153 4235 -90 872 52 1391 248 1810 681 153 158 297 355 400
						547 16 30 42 64 57 77 l29 24 42 -30 c29 -20 65 -34 108 -41 64 -11 98 -4 191
						37 21 8 20 -4 -18 -156 -33 -135 -76 -251 -151 -414 -131 -280 -138 -301 -138
						-390 1 -67 5 -88 27 -130 45 -86 117 -136 249 -172 88 -25 289 -24 429 1 114
						20 53 21 939 -4 487 -14 816 -2 1116 40 137 20 243 30 280 27 35 -3 133 -29
						233 -61 292 -95 428 -125 706 -152 89 -9 174 -21 191 -27 16 -6 82 -62 146
						-123 64 -62 125 -115 137 -118 13 -4 24 -22 32 -52 17 -59 54 -104 86 -104 28
						0 30 14 14 155 -18 162 -30 188 -130 290 -49 50 -106 113 -128 140 -92 116
						-159 155 -282 163 -41 2 -82 10 -90 17 -39 33 -99 53 -180 58 -101 8 -150 22
						-256 75 -177 88 -312 116 -465 96 -225 -30 -977 -6 -1349 42 -314 41 -542 112
						-653 204 -84 71 -110 192 -84 391 30 221 92 447 297 1074 229 703 294 1010
						293 1395 0 219 -14 325 -64 474 l-30 90 60 115 c171 333 243 537 381 1081 71
						280 161 594 205 715 48 134 170 385 188 385 19 0 167 -73 234 -116 32 -20 76
						-53 98 -73 22 -20 96 -70 164 -111 151 -92 234 -166 305 -273 93 -141 98 -156
						85 -233 -13 -74 -8 -138 23 -324 15 -91 21 -164 20 -270 -1 -142 0 -146 30
						-212 29 -64 31 -72 24 -150 -4 -46 -13 -112 -21 -148 -7 -36 -12 -67 -9 -69
						12 -13 90 25 127 62 23 23 50 43 61 44 24 4 63 39 72 65 3 10 12 18 20 18 9 0
						29 13 45 29 l29 29 0 154 c0 124 4 165 20 215 34 108 35 173 6 313 -53 264
						-117 433 -248 657 -159 272 -290 437 -581 726 -170 168 -218 221 -212 235 41
						104 125 393 125 434 0 44 176 264 267 333 24 18 87 82 139 142 110 124 77 96
						437 377 l277 216 50 -25 c85 -43 159 -55 352 -55 193 0 293 -15 362 -53 32
						-17 45 -33 61 -75 11 -28 23 -52 26 -52 8 0 39 97 39 124 0 40 -21 95 -47 127
						l-26 31 59 -7 c109 -13 148 -43 174 -132 7 -24 16 -43 21 -43 13 0 69 70 75
						95 10 39 -5 111 -28 141 -23 28 -202 150 -278 189 -62 31 -200 72 -285 85
						-103 14 -251 12 -345 -6 -179 -33 -402 -135 -519 -236 -74 -64 -231 -153 -336
						-191 -94 -34 -110 -41 -258 -119 -70 -38 -129 -68 -132 -68 -3 0 -5 80 -5 178
						0 181 -15 421 -50 827 -31 362 -26 510 21 548 27 22 159 23 344 2 214 -24 312
						-18 364 24 14 12 36 25 47 30 12 5 30 21 42 35 12 16 30 26 46 26 38 0 53 33
						67 140 15 122 7 227 -21 285 -30 62 -116 122 -450 313 -91 51 -167 95 -169 97
						-1 2 4 14 13 27 17 24 20 55 9 83 -15 42 -193 137 -373 201 -37 13 -65 28 -64
						36 1 7 26 87 57 178 64 190 85 291 94 445 9 168 -23 419 -66 517 l-19 43 -7
						-30z"/>
			 		</g>
			 </svg>
			</img>
			<p>Image by Peter Selinger under CC0</p>

			</div>

			<!-- No issues on weight 
			<div class="sample-box">
				<h4>Font weights</h4>
				<hr/>
	
				<p style="font-weight: bold;">bold</p>
				<p style="font-weight: bolder;">bolder</p>
				<p style="font-weight: normal;">normal</p>
				<p style="font-weight: lighter;">lighter</p>
	
				<p style="font-weight: 900;">900</p>
				<p style="font-weight: 700;">700</p>
				<p style="font-weight: 500;">500</p>
				<p style="font-weight: 300;">300</p>
				<p style="font-weight: 100;">100</p>
			</div>
			-->

		</div>


	</div>

	<script>
		function reveal(all) {
			let done = false
			document.querySelectorAll(".sample-box").forEach(sampleBox => {
				if (all || (!done && sampleBox.style.display !== "inline-block")) {
					sampleBox.style.display = "inline-block"
					done = true
				}
			})
		}

		function restart() {
			document.querySelectorAll(".sample-box").forEach(sampleBox => {
				sampleBox.style.display = "none"
			})
		}
	</script>



	<!-- Axe continuous starts here -->

	<script>

		function handleAxeScan(issuesFound, axeReport) {
			if (!issuesFound)
				console.debug("Axe scan result: 0 violations found")

			else {
				const numNodes = axeReport.violations.reduce((acc, cur) => acc + cur.nodes.length, 0)

				console.log(" ")
				console.warn(`Axe scan result: ${axeReport.violations.length} violations affecting ${numNodes} nodes`)

				axeReport.violations.forEach((v,idx) => {
					console.log(`Violation ${idx+1}: ${v.help}`)
					console.log(`   How to fix: ${v.helpUrl}`)
					console.log(`   Affects ${v.nodes.length} nodes...`)
					v.nodes.forEach((node, idx) => {
						console.log(`   ${idx}`, document.querySelector(node.target[0])) 
					})
				})
			}
		}


		axeContinuous(
			document.querySelector(".axe-scan-here"),
			250,
			{
				runOnly: {
					values: ['wcag2a', 'wcag2aa'],
				},
				reporter: "v2",
				// enable to get performance statistics
				performanceTimer: false
			},
			handleAxeScan
		)

		console.log("axe-continuous accessibility scanning enabled")

	</script>
</body>

</html>